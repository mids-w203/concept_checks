---
title: "t-test Demo"
author: "D. Alex Hughes"
date: "`r Sys.Date()`"
output: github_document
---

```{r}
library(tidyverse)
```

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

In this worksheet, we are going to work with the data generated by the class! You might recognize yourself in this data (but you might not). 

Please note, we asked for this data from all the students, and, if someone were motivated they could likely de-identify responses in this data. That is why we have been careful to keep from asking any questions that we would not want to be printed publicly. Just the same, please don't take this data from here and put it somewhere else. Thank you! 

# Read and Clean Data 

Classic! We're going to have to read in the data, and then we're going to tidy up a portion of the data so that we can work with it. 

```{r}
d <- read_csv('data/breath_holding.csv') %>% 
  rename(
    work_currently = `Are you working?`, 
    work_hours     = `If you're being honest with yourself, how many hours do you work a week?`, 
    work_normative = `If you're being honest with yourself, how many hours should it take you to do a week's worth of your work?`, 
    other_classes  = `Are you taking other classes this semester?`, 
    number_kids    = `How many children live in your home?`, 
    number_adults  = `(Including you) How many adults live in your home?`, 
    number_pets    = `How many pets live in your home?`, 
    number_legs    = `If you add up all the legs of all the pets and people that live in your home, how many legs are there?`, 
    languages      = `In how many languages could you talk about the day's events?  (how many languages do you speak)`, 
    re_watch       = `Do you re-watch seasons of your favorite TV shows?`, 
    re_read        = `Do you re-read your favorite books?`, 
    re_listen      = `Do you re-listen to your favorite albums?`, 
    hold_breath    = `Don't pass out, but: how long can you hold your breath (in seconds)? Literally, start a stopwatch and see how long you can go.`
  ) %>% 
  select(
    work_currently, work_hours, work_normative,
    other_classes, 
    number_kids, number_adults, number_pets, number_legs,
    languages, 
    re_watch, re_read, re_listen, 
    hold_breath
  )
```

```{r}
View(d)
```

# Data in hand

Now that we've got the data in hand, let's ask a few questions about it!

What does the distribution of the number of legs in the household look like? 

```{r}
d %>% 
  ggplot() + 
  aes(x=number_legs) + 
  geom_histogram()
```

Ok, there is someone who has a lot of pets! (Notice how, with this data, we could very quickly identify who this person is -- if we were in their live session, we could see all those pets walking through the screen, and then we could query into this data to learn other things that are individual to them. This gives rise to a privacy concern, and a series of protections that we might want to have about data.)

Is there a relationship between the number of legs in a household, and the number of pets in a household? In order to evaluate this, we might plot both at the same time in a scatter plot. 

```{r}
d %>% 
  ggplot() + 
  aes(x=number_legs, y=number_pets) + 
  geom_point() # +
  # geom_jitter()
```

Hmm... What is tough about that plot is that because there are only a small number of levels in each variable, we're plotting data on top of itself. That means that we don't really have a good sense for the associations, because we cannot see all of the data. 

Go back to the code above, and change from `geom_point()` to `geom_jitter()` which will add a small, random perturbation to each point. This is going to make it so that, at the very least, we don't land things on top of each other. And, since the perturbation is random, it will not create a systematic relationship in what we see. 

After making the change in the plot code, would you say that there is a relationship between the number of legs and the number of pets? We sure would. 

In the plot above, you have initially placed the `number_legs` variable on the x-axis and the `number_pets` variable on the y-axis. While these variables are simply associated with one another -- if you told a story about them, would you describe the number of pets or legs first in that story? For me (Alex here...) I think that it would probably start with the pets and then move toward the legs. 

In plots that we create, it is customary to place the first variable in the "story" on the x-axis. Why? Because it is our custom. No other reason. And, while in this case, you could imagine the number of pets being a function of the number of legs, *or* the number of legs being a function of the number of pets, it seems to make more sense to me to make the number of legs a function of the number of pets. 

So, please edit the code above to change the x- and y-axes in accordance with this story telling. At the same time, please also add a `labs()` argument to the plot so that there is a title, and the x- and y-axes are labeled with plain language titles, rather than the variable labels. 

```{r}

```

# Conducting a Test 

Now for the real task: **Do people who do not have kids, have more of fewer pets?** 

We can imagine this going one of two ways -- maybe people who have kids get pets, or maybe people who do not have kids are younger, and so are at a life stage where they do not have room in their home for pets. (There are a lot of other stories that one could tell as well!) 

```{r}
d %>% 
  mutate(any_kids = number_kids > 0) %>% 
  ggplot() + 
  aes(x=any_kids, y=number_pets, color=any_kids, fill=any_kids) + 
  geom_boxplot() # 
  # geom_jitter(width = 0.125)
```

Once again, the sparsity of the data is meant that we are not able to see much with a simple boxplot. Change the boxplot, above, to a plot that has a full-display of the data -- a `geom_jitter()`. 

Looking at this data, does it look like there is a relationship between kids and pets? 

## Null and Alterantive Hypothesis 

> Null Hypothesis: 'What is your null hypothesis? What is the statement that you would like the data to overturn?' 
> Alternative Hypothesis: 'If the data were convincing enough, what are the states of the world that you could believe are true?' 

## What is the appropriate test to conduct? 

The number of pets is a numeric variable with a meaningful zero point (i.e. someone owns no pets). Does this mean that a t-test is a justifiable test to conduct? Actually, in this case we think that the answer is probably, "No." Because the number of pets is: 

- Count data; 
- There are very few observations; and, 
- There are is some outlying data; 

We think that conducting a t-test actually is probably not appropriate in this case. Because the data does not satisfy the **assumptions** of a t-test, comparing the test-statistic against a reference t-distribution doesn't provide information that might not have any statistical guarantees. 

We wanted to show this, to highlight that there are some types of questions that your data just will not let you answer with a statistical guarantee. 

# What about breath holding? 

Perhaps we should ask a different question: rather than asking for the number of pets, how long someone can hold their breath? 

This is still count data (i.e. there is still a meaningful zero point, the space between values is the same for all differences between values, but there cannot be negative values), and so a t-tests is not always a valid test to conduct. (See the decision we came to above). However, for this data series -- `hold_breath` the data is a little bit "better behaved". 

```{r}
d %>% 
  ggplot() + 
  aes(x=hold_breath, fill = number_kids > 0) + 
  geom_histogram(bins = 6, position = 'dodge')
```


The skew in the data is less than with the number of kids. 


```{r}
d %>% 
  ggplot() + 
  aes(x=number_legs) + 
  geom_histogram(bins=7)
```


Fill out the following sections, writing down your 

## Null and Alternative Hypothesis

## What is the appropriate test to conduct? 

## Condcut a test

## Conclude from the results of this test




